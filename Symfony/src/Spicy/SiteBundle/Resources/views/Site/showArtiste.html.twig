{% extends "SpicySiteBundle::layout.html.twig" %}

{% block title %}
{{ parent() }} : Retrouvez toute la musique et les vidéos clip de {{artiste.libelle}}
{% endblock %}

{% block meta_description %}
    <meta name="Description" content="Mimizik te propose toute la musique et les vidéos clip de {{artiste.libelle}}. {{artiste.description}}"/> 
{% endblock %}
    
{% block stylesheets %}
    <link rel="stylesheet" href="{{asset('css/pagination.css')}}" type="text/css" />
    {{ parent() }}
{% endblock %}

{% block body %}
    {{ parent() }}
    
    <div class="page-title wrapper">
        <div class="container">
            <span>Artiste</span>
            <div class="clear"></div>
        </div>
    </div>
    <div class="content wrapper">
        <div class="container">
            <div class="two-third column">
                <div>
                    <div class="un-tier column-perso">
                        <div class="block-content-perso">
                            <img src="https://graph.facebook.com/{{artiste.tagFacebook}}/picture?type=large" alt="{{artiste.libelle}} sur mimizik.com" />
                            <h4 class="release-title">{{artiste.libelle}}</h4>
                        </div>
                    </div>
                    <div class="un-demi column last">
                        <div class="content-block">
                            <div class="block-title"><span>Description</span></div>
                            <div class="block-content">{{artiste.description}}</div>
                            <div class="block-content">Tags :
                                {% for genre in genres %}
                                    <a href="{{ path('spicy_site_genre',{'id':genre.id,'slug':genre.slug})}}">{{genre.libelle}} </a>
                                 {%else%}
                                    <p>Pas de genres de cette artiste</p>
                                 {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content-block">
                    <div class="block-title"><span>Vidéos</span></div>
                    <div class="block-content">
                        <div class="featured-blog">
                        {% for video in videos %}
                            {% include "SpicySiteBundle:Site:video_post.html.twig" %} 
                         {%else%}
                            <p>Pas de vidéos de cette artiste</p>
                         {% endfor %}
                            <div id="Pagination" ></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="one-third column last">
                <div class="content-block">
                    <div class="block-title"><span>Suggestions</span></div>
                    <div class="block-content">
                        {% for sArtiste in suggestions %}
                            {% include "SpicySiteBundle:Site:artiste_post.html.twig" %} 
                         {%else%}
                            <p>Pas de suggestions</p>
                         {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
    
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">

        // When document is ready, initialize pagination
        $(document).ready(function(){      
            /*initPagination();
            initListArtiste();*/
            initAlphabet();
        });
    </script>
    <script type="text/javascript">
        function retourAlpha()
        {
            $.ajax({
                type: "POST",
                url: "{{ path('spicy_site_alphabet')}}",
                cache: false,
                success: function(data){
                   $('#resultat').html(data);
                }
            });
        }
        function initListArtiste() {    
           $(".loading").hide();
           $(document).ready(function(){ 
               $(".pagination>a").click(function(){
                   $(".loading").show();
                   var page = $(this).attr("href");
                   var DATA = 'page=' + page;
                   $.ajax({
                       type: "POST",
                       url: "{{ path('spicy_site_liste_artiste')}}",
                       data: DATA,
                       cache: false,
                       success: function(data){
                          $('#resultat').html(data);
                          $(".loading").hide();
                       }
                   });
                   return false;
               });
           });
       }
       
       function initAlphabet() {    
           $(".loading").hide();
           $(document).ready(function(){ 
               $("#alphabet>p>b").click(function(){
                   $(".loading").show();
                   var lettre = $(this).attr("href");
                   var DATA = 'lettre=' + lettre;
                   $.ajax({
                       type: "POST",
                       url: "{{ path('spicy_site_liste_alpha')}}",
                       data: DATA,
                       cache: false,
                       success: function(data){
                          $('#resultat').html(data);
                          $(".loading").hide();
                       }
                   });
                   return false;
               });
           });
       }
   </script>
{% endblock %}
